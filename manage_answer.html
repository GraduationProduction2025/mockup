<!doctype html>
<html lang="ja">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="wicth=device-width, initial-scale=1">
	<title>集計</title>
	<style>
		body {
			font-family: 'Arial', sans-serif;
			margin: 0;
			padding: 0;
			background-color: #f8f8f8;
		}

		h1 {
			font-size: 24px;
			margin: 0;
		}

		.custom-box {
			width: 80%;
			margin: auto;
			overflow-x: auto;
			background-color: #fff;
			border-radius: 5px;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			padding: 20px;
			margin-top: 20px;
		}

		.buttons {
			margin: 0;
			/* マージンをリセット */
		}

		.kai {
			background-color: #f1f1f181;
			padding: 1px 25px;
			margin-top: 10px;
			border: 1px solid #ddd;
		}

		.kai h1 {
			margin-block-end: 0;
		}

		.kai p {
			margin-block-start: 0;
		}

		.graph {
			list-style: none;
			padding: 0;
			margin: auto;
			display: flex;
			align-items: center
				/*flex-start*/
			;
			justify-content: center;
		}

		.legend {
			display: flex;
			flex-direction: column;
			height: 100%;
		}

		.legend-item {
			display: flex;
			align-items: center;
			margin-bottom: 5px;
		}

		.legend-color {
			width: 20px;
			height: 20px;
			margin-right: 5px;
		}

		.buttons {
			display: flex;
			align-items: center;
			justify-content: space-between;
			margin-top: 10px;
		}

		.buttons h3 {
			margin: 0;
			/* color: #555; */
		}

		.buttons button {
			padding: 10px 20px;
			font-size: 14px;
			cursor: pointer;
			border: none;
			border-radius: 4px;
		}

		.buttons .right-button {
			/* background-color: #3498db; */
			/* color: #fff; */
			margin-left: auto;
		}
	</style>
</head>

<body>
	<div class="custom-box">
		<h1>回答集計</h1>
		<div class="buttons">
			<button class="right-button">戻る</button>
		</div>
		<div class="kai">
			<h2>好きな食べ物</h2>
			<p>100件の回答</p>

			<div class="graph">
				<canvas id="myCanvas" width="400" height="300"></canvas>

				<ul class="legend" id="legend">
					<!-- 凡例はスクリプトで追加 -->
				</ul>
			</div>
		</div>

		<div class="kai">
			<h2>何故好きか</h2>
			<p>47件の回答</p>

			<div class="graph">
				<ul class="legend" id="legend">
					</p>・新鮮な魚介類の豊富な味わいが楽しめるからです。</p>
					</p>・ヘルシーで栄養価が高いため、毎日の食事に取り入れやすいです。</p>
					</p>・子供の頃からの懐かしい味があり、安心感を与えてくれます。</p>
					</p>・香り豊かで、食欲をそそる香りが好きです。</p>
					</p>・料理のバリエーションが豊富で、飽きることなく楽しめます。</p>
					</p>・地元の食材を使用しているため、地域の特産品をサポートできます。</p>
					</p>・簡単に調理できるため、忙しい日常でも手軽に食べることができます。</p>
					</p>・食感が楽しいため、食べること自体が楽しみです。</p>
					</p>・風味豊かで、異なる調味料やスパイスの組み合わせが魅力です。</p>
					</p>・季節ごとに異なる食材を楽しめるので、季節感を感じられます。</p>
					</p>・見た目が美しく、料理を楽しむときの視覚的な要素が大切です。</p>
					</p>・家族や友人との共有がしやすく、食事を通じてコミュニケーションが深まります。</p>
					</p>・伝統的な料理で、文化や歴史を感じられるからです。</p>
					</p>・リラックスした雰囲気のカフェやレストランで楽しむことができます。</p>
					</p>・エネルギー補給がしやすく、パワフルな一日を過ごすために欠かせません。</p>
					</p>・シンプルながらも美味しいため、食べること自体が至福の瞬間です。</p>
					</p>・異なる文化の料理を試すことで、世界の多様性を感じられます。</p>
					</p>・特別な日やイベントで食べることで、良い思い出ができます。</p>
					</p>・美容や健康に良い成分を含んでいるため、美容意識も満たされます。</p>
					</p>・食材の組み合わせや調理法によって、毎回新しい発見があります。</p>
				</ul>
			</div>
		</div>

		<script>
			var canvas = document.getElementById('myCanvas');
			var context = canvas.getContext('2d');

			var data = [0.45, 0.28, 0.15, 0.12]; // 青、緑、赤、オレンジの割合
			var colors = ['#3498db', '#2ecc71', '#e74c3c', '#f39c12']; // 青、緑、赤、オレンジの色

			function drawPieChart(data, colors) {
				var x = canvas.width / 2;
				var y = canvas.height / 2;
				var radius = Math.min(x, y) - 10;

				var startAngle = -0.5 * Math.PI; // 12時の位置から開始
				var endAngle = 0;

				var legend = document.getElementById('legend');

				for (var i = 0; i < data.length; i++) {
					endAngle = startAngle + (data[i] * 2 * Math.PI);

					// セクションの色を指定
					var color = colors[i];
					context.fillStyle = color;

					// 円弧を描く
					context.beginPath();
					context.moveTo(x, y);
					context.arc(x, y, radius, startAngle, endAngle);
					context.closePath();
					context.fill();

					// パーセンテージを表示
					var textAngle = startAngle + (data[i] * Math.PI); // セクションの中央角度
					var textX = x + Math.cos(textAngle) * radius * 0.7; // 中央座標のX
					var textY = y + Math.sin(textAngle) * radius * 0.7; // 中央座標のY
					context.fillStyle = '#000'; // テキストの色
					context.font = '12px Arial';
					context.textAlign = 'center';
					context.fillText((data[i] * 100).toFixed(1) + '%', textX, textY);

					// 凡例を追加
					addLegendItem(legend, color, i);

					// 次のセクションの開始角度を設定
					startAngle = endAngle;
				}
			}

			function addLegendItem(legend, color, index) {
				var legendItem = document.createElement('li');
				legendItem.className = 'legend-item';

				var legendColor = document.createElement('div');
				legendColor.className = 'legend-color';
				legendColor.style.backgroundColor = color;

				var legendText = document.createElement('span');
				legendText.textContent = getColorLabel(index);

				legendItem.appendChild(legendColor);
				legendItem.appendChild(legendText);

				legend.appendChild(legendItem);
			}

			function getColorLabel(index) {
				var labels = ['いぶりがっこ', '塩昆布', '煮干し', 'ミ＝ゴ'];
				return labels[index];
			}

			drawPieChart(data, colors);
		</script>
	</div>
</body>

</html>